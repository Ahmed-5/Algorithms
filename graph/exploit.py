import numpy as np
import scipy

r, c = map(int, input().split())
x, y = map(int, input().split())
arr = []
for i in range(r):
    arr.append(list(map(int, input().split())))

arr = np.array(arr)
values_one = scipy.signal.correlate(np.ones(x,y), arr, mode='valid')
values_two = scipy.signal.correlate(np.ones(y,x), arr, mode='valid')

print(values_one)

max_sum = 0
for i in range(r - x + 1):
    for j in range(c - y + 1):
        for k in range(r - y + 1):
            for l in range(c - x + 1):
                if ((abs(i - k) >= y or abs(j - l) >= x)):
                    max_sum = max(max_sum, values_one[i][j] + values_two[k][l])

# e
for i in range(r - x + 1):
    for j in range(c - y + 1):
        for k in range(i+1, r - x + 1):
            for l in range(j+1, c - y + 1):
                if ((abs(i - k) >= x or abs(j - l) >= y)):
                    max_sum = max(max_sum, values_one[i][j] + values_one[k][l])
            max_sum = max(max_sum, values_one[i][j])
for i in range(r - y + 1):
    for j in range(c - x + 1):
        for k in range(i+1, r - y + 1):
            for l in range(j+1, c - x + 1):
                if ((abs(i - k) >= y or abs(j - l) >= x)):
                    found = True
                    max_sum = max(max_sum, values_two[i][j] + values_two[k][l])
            max_sum = max(max_sum, values_two[i][j])
print(max_sum)
